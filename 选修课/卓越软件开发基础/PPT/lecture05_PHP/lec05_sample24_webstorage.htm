<!DOCTYPE html>
<html>
  <head>
    <title>Lecture5 Sample</title>
    <style>
		body{font-size:16pt;}
		h1{font-size:28pt;font-weight:bold;color:red;}
		input{font-size:16pt;}
    </style>
  </head>
  <body>
	<h1>Test Web Storage</h1>
	<form name="form1">
		Name:  <input type="text" id="name1" name="name1"><br>
		Value: <input type="text" id="value1" name="value1"><br>
		<input type="button" value="Session" id="button1">
		<input type="button" value="add" id="button2">
		<input type="button" value="delete" id="button3">
		<input type="button" value="clear" id="button4">
	</form>
	<hr>
	<output id="output1"></output>
  </body>
	<script>
		
		var name1 = document.form1.name1;
		var value1 = document.form1.value1;
		
		var btn1 = document.getElementById("button1");
		var btn2 = document.getElementById("button2");
		var btn3 = document.getElementById("button3");
		var btn4 = document.getElementById("button4");
		var output1 = document.getElementById("output1");
		
		btn1.addEventListener("click",function(){
				sessionStorage.setItem(name1.value,value1.value);
				output1.innerHTML = getString();
			},false);

		btn2.addEventListener("click",function(){
				localStorage.setItem(name1.value,value1.value);
				output1.innerHTML = getString();
			},false);

		btn3.addEventListener("click",function(){
				localStorage.removeItem(name1.value,value1.value);
				output1.innerHTML = getString();
			},false);

		btn4.addEventListener("click",function(){
				localStorage.clear();
				output1.innerHTML = getString();
			},false);
		
		function getString(){
			var str;
			
			if (typeof (localStorage) === "undefined" || typeof (sessionStorage) === "undefined") {
				str = "Web Storage is not supported on this browser...";
			}
			else {
				str = "sessionStorage is: ";
				for (var key in sessionStorage ){
					str = str + key+"="+sessionStorage.getItem(key);
				}
				str = str + "\n";

				str = str + "localStorage is: ";
				for (var key in localStorage ){
					str = str + key+"="+localStorage.getItem(key);
				}
			}

			return str;
		}

		output1.innerHTML = getString();

	</script>
</html>
